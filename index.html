<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>WebRTC</title>
    <script src="https://unpkg.com/peerjs@1.0.0/dist/peerjs.min.js"></script>
  </head>
  <body>
    <script>
      let roomID = location.search.split("?")[1];

      const peer = new Peer();

      peer.on("open", function(id) {        
        console.log("Opening conection to PeerJS", id);
        if (roomID) {
          peer.connect(roomID, function(e) {
            console.log(e);
          });
        }        
      });

      peer.on("connection", function(e) {
        console.log("Connection made");
        console.log(e);
      });

      // peer.on("open", function(id) {
      //   console.log(id);
      //   // here you have conn.id

      //   // see if webrtc peer exists
      //   peer.connect('webrtc-orchestra', function(e) {
      //     console.log(e);
      //   });

      //   // if webrtc peer does not exist disconnect
      //   // and reconect as webrtc
      //   peer.on('error', function(e) {
      //     if (e.type === 'peer-unavaialble') {

      //     }
      //   });

      // });
    </script>
  </body>
</html>
